{% load static %}

<style>
  /* Базовые стили для навбара */
 
</style>

<nav class="navbar navbar-expand-lg">
    <!-- Название сайта слева -->
    <a class="Jew" href="{% url 'store:home' %}">
        <span class="font-weight-bold">ЮВЕЛИРНЫЕ ИЗДЕЛИЯ</span>
    </a>

    <!-- Кнопка для мобильной версии -->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#mainNavbar" 
            aria-controls="mainNavbar" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    
    <!-- Основная навигация -->
    <div class="collapse navbar-collapse" id="mainNavbar">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <a class="nav-link {% if request.path == '/' %}active{% endif %}" href="{% url 'store:home' %}">
                    <i class="fas fa-home nav-icon"></i>Главная
                </a>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle {% if 'category' in request.path %}active{% endif %}" 
                   href="#" id="categoriesDropdown" role="button" data-toggle="dropdown" 
                   aria-haspopup="true" aria-expanded="false">
                    <i class="fas fa-list nav-icon"></i>Категории
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="categoriesDropdown">
                    {% if categories_menu %}
                        {% for cat_menu in categories_menu %}
                            <a class="dropdown-item" href="{% url 'store:category-products' cat_menu.slug %}">{{ cat_menu.title }}</a>
                        {% endfor %}
                    {% endif %}
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="{% url 'store:all-categories' %}">Все категории</a>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link {% if '/contacts/' in request.path %}active{% endif %}" href="{% url 'store:contacts' %}">
                    <i class="fas fa-envelope nav-icon"></i>Контакты
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link {% if '/cart/' in request.path %}active{% endif %}" href="{% url 'store:cart' %}">
                    <i class="fas fa-shopping-cart nav-icon"></i>Корзина
                    {% if cart_items.count > 0 %}
                    <span class="cart-badge">{{ cart_items.count }}</span>
                    {% endif %}
                </a>
            </li>
            {% if request.user.is_authenticated %}
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" 
                   data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fas fa-user nav-icon"></i>{{ request.user.username }}
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
                    <a class="dropdown-item" href="{% url 'store:profile' %}">
                        <i class="fas fa-user-circle nav-icon"></i>Профиль
                    </a>
                    <a class="dropdown-item" href="{% url 'store:add-address' %}">
                        <i class="fas fa-map-marker-alt nav-icon"></i>Адреса
                    </a>
                    <a class="dropdown-item" href="{% url 'store:orders' %}">
                        <i class="fas fa-clipboard-list nav-icon"></i>Заказы
                    </a>
                    <a class="dropdown-item" href="#">
                        <i class="fas fa-heart nav-icon"></i>Мои желания
                    </a>
                    <a class="dropdown-item" href="{% url 'store:password-change' %}">
                        <i class="fas fa-key nav-icon"></i>Сменить пароль
                    </a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="{% url 'store:logout' %}">
                        <i class="fas fa-sign-out-alt nav-icon"></i>Выйти
                    </a>
                </div>
            </li>
            {% else %}
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="authDropdown" role="button"
                   data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fas fa-user nav-icon"></i>Beketay
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="authDropdown">
                    <a class="dropdown-item" href="{% url 'store:login' %}">
                        <i class="fas fa-sign-in-alt nav-icon"></i>Войти
                    </a>
                    <a class="dropdown-item" href="{% url 'store:register' %}">
                        <i class="fas fa-user-plus nav-icon"></i>Регистрация
                    </a>
                </div>
            </li>
            {% endif %}
        </ul>
    </div>
</nav>